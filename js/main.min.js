'use strict';

var dropDown = document.querySelectorAll('.js__dropdown');

var dropDownTitle = document.querySelectorAll('.js__dropdown-title');

var arrow = document.querySelectorAll('.arrow');

function refreshDropDown(event) {
  var parent = event.currentTarget.parentElement;
  // var arrowSpan = event.currentTarget.children[1];
  // var arrowAsChild = arrowSpan.children;
  var arrowAsChild = event.currentTarget.children[1];

  if (parent.classList.contains('visible')) {
    parent.classList.remove('visible');

    arrowAsChild.classList.remove('fa-angle-up');
    arrowAsChild.classList.add('fa-angle-down');

  } else {
    closeAllDropDown();
    parent.classList.add('visible');

    arrowAsChild.classList.remove('fa-angle-down');
    arrowAsChild.classList.add('fa-angle-up');

  }
}

function closeAllDropDown() {
  for (var i = 0; i < dropDown.length; i++) {
    dropDown[i].classList.remove('visible');
    arrow[i].classList.remove('fa-angle-up');
    arrow[i].classList.add('fa-angle-down');
  }
}

for (var j = 0; j < dropDownTitle.length; j++) {
  dropDownTitle[j].addEventListener('click', refreshDropDown);
}

//get image

var fr = new FileReader();

var uploadBtn = document.querySelector('.item__button-file');
var fileField = document.querySelector('#image');
var profileImage = document.querySelector('.personal-image');

function getImage(e){
  var myFile = e.currentTarget.files[0];
  fr.addEventListener('load', writeImage);
  fr.readAsDataURL(myFile);
}

function writeImage() {
  profileImage.src= fr.result;
}

function fakeFileClick() {
  fileField.click();
}

fileField.addEventListener('change', getImage);
uploadBtn.addEventListener('click', fakeFileClick);

//input name y role

var nameField = document.querySelector('.form-field--name');
var roleField = document.querySelector('.form-field--role');

function writeData(event) {
  var guiltyElement = event.currentTarget;
  var targetID = guiltyElement.getAttribute('data-donde');

  document.querySelector('#' + targetID).innerHTML = guiltyElement.value;
}

nameField.addEventListener('keyup', writeData);
roleField.addEventListener('keyup', writeData);

//redes sociales

var mailField = document.querySelector('.form-field--mail');
var telField = document.querySelector('.form-field--tel');
var linField = document.querySelector('.form-field--lin');
var ghField = document.querySelector('.form-field--gh');

function writeSocialMedia(event) {
  var guiltyElement = event.currentTarget;
  var targetID = guiltyElement.getAttribute('data-donde');
  var inputID = guiltyElement.getAttribute('id');
  var linkID = document.querySelector('#' + targetID);

  if (inputID==='mail'){
    linkID.href = 'mailto:' + guiltyElement.value;
    linkClass.classList.remove('contact__link--inactive');
  } else if (inputID==='telephone'){
    linkID.href = 'tel:' + guiltyElement.value;
  } else if  (inputID==='linkedin'){
    linkID.href = 'https://linkedin.com/in/' + guiltyElement.value;
  } else if (inputID==='github'){
    linkID.href = 'https://github.com/' + guiltyElement.value;
  }
}

mailField.addEventListener('change', writeSocialMedia);
telField.addEventListener('change', writeSocialMedia);
linField.addEventListener('change', writeSocialMedia);
ghField.addEventListener('change', writeSocialMedia);

// paleta

var paleta1 = document.querySelector('#color1');
var paleta2 = document.querySelector('#color2');
var paleta3 = document.querySelector('#color3');
var card = document.querySelector('#card');
var cardInfo = document.querySelector('#card__info');

function changeColor(event) {
  var clickedPalette = event.currentTarget;
  var selectedPalette = clickedPalette.getAttribute('radio-cual');
  card.classList.remove('paleta-azul', 'paleta-roja', 'paleta-gris');
  if (selectedPalette === '1') {
    card.classList.add('paleta-azul');
  } else if (selectedPalette === '2') {
    card.classList.add('paleta-roja');
  } else if (selectedPalette === '3') {
    card.classList.add('paleta-gris');
  }
}

paleta1.addEventListener('click', changeColor);
paleta2.addEventListener('click', changeColor);
paleta3.addEventListener('click', changeColor);

// fuentes

var font1 = document.querySelector('#font1');
var font2 = document.querySelector('#font2');
var font3 = document.querySelector('#font3');

function changeFont (event) {
  var clickedFont = event.currentTarget;
  var selectedFont = clickedFont.getAttribute('radio-cual');
  cardInfo.classList.remove('font-card--comicsans', 'font-card--ubuntu', 'font-card--montserrat');

  if (selectedFont === '4') {
    cardInfo.classList.add('font-card--ubuntu');
  } else if (selectedFont === '5') {
    cardInfo.classList.add('font-card--comicsans');
  } else if (selectedFont === '6') {
    cardInfo.classList.add('font-card--montserrat');
  }
}

font1.addEventListener('click', changeFont);
font2.addEventListener('click', changeFont);
font3.addEventListener('click', changeFont);

'use strict';
//userSelections para recoger en un array las selecciones del usuario
var userSelections = [];

//variables para eliminar los select
var parentDiv;
var parentSelect;

//función para crear y añadir contenido al html
function addContentToHtml() {
  //Apuntar al padre de Select, el div
  var parentDivSelect = document.querySelector('.js__select-container');

  //Declaraciones de variables de select y su contenido
  var newParentSelect = document.createElement('div');
  var newSelect = document.createElement('select');
  var newOption = document.createElement('option');
  var optionContent = document.createTextNode('HTML');

  //Declaraciones variables boton más div que lo contiene

  var newSelectButton = document.createElement('div');
  var newSelectButtonContent = document.createElement('i');

  //Bucle que recorre el array de userSelections (+ 1 para que aparezca 1 ya pintado al cargar la página) y añade los grupos de contenido
  for (var i = 0; i < userSelections.length + 1; i++) {
    //Insercion contenido en option, e insercion de option como contenido de select. Insercion de select dentro del div que es su padre
    newOption.appendChild(optionContent);
    newSelect.appendChild(newOption);
    newParentSelect.appendChild(newSelect);
    parentDivSelect.appendChild(newParentSelect);

    newParentSelect.classList.add('item__select-container');
    newSelect.classList.add('item__select');
    newOption.classList.add('js__option');

    //Insercion clase font-awesome en <i>, insercion <i> en <div>
    newSelectButtonContent.classList.add('fas');
    newSelectButtonContent.classList.add('fa-plus');
    newSelectButtonContent.classList.add('js__add');
    newSelectButton.appendChild(newSelectButtonContent);
    newSelectButton.classList.add('item__select-button');
    newParentSelect.appendChild(newSelectButton);
  }

  changeButton();
}

//función para cambiar el signo del botón dependiendo de las seleciones del usuario
function changeButton() {
  var button = document.querySelectorAll('.js__add');
  for (var i = 0; i < button.length; i++) {
    console.log('i = ' + i);

    button[i].setAttribute ('number', i);

    if (userSelections.length === i) {
      button[i].classList.add('fa-plus');
      button[i].removeEventListener('click', removeSelect);
      button[i].addEventListener('click', addSelect);
    } else {
      button[i].classList.remove('fa-plus');
      button[i].classList.add('fa-minus');
      button[i].removeEventListener('click', addSelect);
      button[i].addEventListener('click', removeSelect);
    }
  }
  //conectSelectWithCard();
}

//Llamada a la función que crea el contenido la primera vez
addContentToHtml();

//Función para añadir el contenido (hasta que las selecciones del usuario sean 3) y cambiar el signo del último botón
function addSelect(event) {
  console.log('estoy poniendo');

  var clickedElement = event.currentTarget;
  var elementNumber = clickedElement.getAttribute('number');
  userSelections.push('option ' + elementNumber);
  console.log(userSelections);
  if (userSelections.length < 3) {
    addContentToHtml();
  } else if (userSelections.length === 3) {
    changeButton();
  }
}

//Función para quitar el contenido (de momento sólo quita el primer campo no el correspondiente al botón que se pincha)
function removeSelect(event) {
  console.log('estoy quitando');
  parentDiv = document.querySelector('.js__select-container');
  parentSelect = document.querySelector('.item__select-container');
  var clickedElement = event.currentTarget;
  var elementNumber = clickedElement.getAttribute('number');
  console.log('elementNumber in remove = ' + elementNumber);
  userSelections.splice(elementNumber, 1);
  console.log(userSelections);
  if (userSelections.length === 2) {
    changeButton();
  } else if (userSelections.length === 1) {
    parentDiv.removeChild(parentSelect);
    changeButton();
  } else if (userSelections.length === 0) {
    parentDiv.removeChild(parentSelect);
    changeButton();
  }
}

//Función para crear el contenido de las habilidades en la preview de la trajeta.
function addContentToCard (){
  console.log('estoy entrando');
  var skills = document.querySelector('.skills');
  var skillsList = document.createElement('ul');

  console.log(skillsItem);
  skills.appendChild(skillsList);
  skillsList.classList.add('skills__list', 'text__skills');

  for (var i = 0; i < 3; i++){
    var skillsItem = document.createElement('li');
    skillsList.appendChild(skillsItem);
    skillsItem.classList.add('skills__item');
  }
}

addContentToCard();

//# sourceMappingURL=main.min.js.map
